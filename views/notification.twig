{% extends '_layout.twig' %}

{% block scripts %}
    <script>
        $(() => {
            $("#form").on("submit", async (evt) => {
                evt.preventDefault();
                console.log(evt);
                const token = $("#token").val();
                const message = $("#message").val();
                const res = await fetch("/api/notifications", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json; charset=utf-8",
                    },
                    body: JSON.stringify({
                        token,
                        message
                    })
                });
            })
        })
    </script>
{% endblock %}

{% block body %}
    <div class="container">
        <div class="row vh-100">
            <div class="col-12 col-md-6 d-flex mx-auto">
                <div class="flex-grow-1 my-3">
                    <form method="POST" action="#" class="h-100" id="form">
                        <div class="h-100 d-flex flex-column">
                            <div class="form-group">
                                <label for="token">
                                    Device Token
                                </label>
                                <input type="text" class="form-control" id="token" value="{{ token }}" disabled>
                            </div>
                            <div class="form-group flex-grow-1 d-flex flex-column">
                                <label for="message">
                                    Message
                                </label>
                                <textarea class="form-control flex-grow-1" id="message"></textarea>
                            </div>
                            <div class="form-group">
                                <input type="submit" class="btn btn-primary"/>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}